<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head></head>
<body><div style="margin-left: 40px; text-align: center;"><big><big><span style="font-weight: bold;">Call Stack &amp; Symbol Resolver Usage</span></big></big><br></div><br><h3>What is it</h3>A collection of tools to inspect the call stack and resolve symbols to a human-readable format. The collection is comprised of:<br><br><ul><li>Containers</li><ul><li><span style="font-family: monospace;">lpt::stack::call_stack&lt; <span style="font-style: italic;">Depth</span> &gt;</span></li><li><span style="font-family: monospace;">lpt::stack::call_frame</span></li><li><span style="font-family: monospace;">lpt::stack::address_type <span style="color: rgb(51, 51, 255);">// A plain memory address. Platform specific.</span><br></span></li></ul><li>Symbol resolvers:</li><ul><li><span style="font-family: monospace;">lpt::stack::null_symbol_info&nbsp; <span style="color: rgb(51, 51, 255);">&nbsp; &nbsp;// Minimal; without memory allocations and other side effects.</span></span></li><li><span style="font-family: monospace;">lpt::stack::basic_symbol_info <span style="color: rgb(51, 51, 255);">&nbsp; &nbsp;// Resolution offered by default libraries on the platform.</span></span></li><li><span style="font-family: monospace;">lpt::stack::extended_symbol_info <span style="color: rgb(51, 51, 255);">// Best resolution with additional libraries (libbfd on GNU-Linux).</span><br></span></li></ul><li>Formatters: how to print the symbol information</li><ul><li style="font-family: monospace;">lpt::stack::terse_formatter</li><li><span style="font-family: monospace;">lpt::stack::fancy_formatter</span></li></ul><li>Aggregator classes:</li><ul><li style="font-family: monospace;">lpt::stack::call_stack_info&lt;&gt;</li><li style="font-family: monospace;"><span style="font-family: monospace;">lpt::stack::call_frame_info&lt;&gt;</span></li><li><span style="font-family: monospace;">lpt::stack::symbol_info&lt;&gt;</span></li></ul></ul><h3>Supported platforms</h3><ul><li>Windows: Visual Studio 2012 CTP;&nbsp; Win32, x64, Itanium</li><li>GNU-Linux: gcc 4.7.0 and later; all supported CPUs</li></ul><h3>Usage</h3><h4>Capturing and printing the call stack</h4><div style="margin-left: 40px;"><span style="font-family: monospace;">#include &lt;lpt/call_stack.hpp&gt; <br><span style="color: rgb(51, 51, 255); font-weight: bold;">// Link with: -lbfd on GNU-Linux</span><br></span><span style="font-family: monospace;"></span><br><span style="font-family: monospace;">typedef lpt::stack::call_stack&lt;40&gt; wstack_type; <span style="font-weight: bold; color: rgb(51, 51, 255);">// We want max 40 call frames</span></span><br><span style="font-family: monospace;">typedef lpt::stack::call_stack_info&lt; wstack_type</span><br><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
, lpt::stack::extended_symbol_info </span><span style="font-family: monospace; color: rgb(51, 51, 255); font-weight: bold;">// All possible symbol information for the platform</span><br><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&gt;&nbsp;&nbsp;&nbsp;&nbsp; extended_call_stack_info_type; </span><br><span style="font-family: monospace;"></span><br><span style="font-family: monospace;">wstack_type here(true);</span><br><span style="font-family: monospace;">std::cout &lt;&lt; "Stack: " &lt;&lt; here.depth() &lt;&lt; " frames:\n"</span><br><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; extended_call_stack_info_type(here) &lt;&lt; std::endl;</span><br><span style="font-family: monospace;"></span></div><br>On a Windows platform this could print:<br><br><div style="margin-left: 40px;"><span style="font-family: monospace;">Stack: 13 frames:</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5ab596] lpt::stack::detail::dbghelp::library::backtrace+0xb6</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At c:\users\amelinte\desktop\lpt\lpt\include\lpt\detail\win_call_stack.h</span><br style="font-family: monospace;"><span style="font-family: monospace;">pp:312</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5a1dd9] lpt::stack::detail::backtrace+0x39</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At c:\users\amelinte\desktop\lpt\lpt\include\lpt\detail\win_call_stack.h</span><br style="font-family: monospace;"><span style="font-family: monospace;">pp:386</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5ac7cf] lpt::stack::call_stack&lt;40&gt;::get_backtrace+0x5f</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At c:\users\amelinte\desktop\lpt\lpt\include\lpt\call_stack.hpp:195</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5a68c2] lpt::stack::call_stack&lt;40&gt;::call_stack&lt;40&gt;+0x52</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At c:\users\amelinte\desktop\lpt\lpt\include\lpt\call_stack.hpp:129</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5a1e58] func2+0x68</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At c:\users\amelinte\desktop\lpt\tests\winstack\winstack.cpp:28</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5ad038] aclass::meth2+0x58</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At c:\users\amelinte\desktop\lpt\tests\winstack\winstack.cpp:49</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5acfba] aclass::meth1+0x5a</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At c:\users\amelinte\desktop\lpt\tests\winstack\winstack.cpp:55</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5a20dc] func1+0x5c</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At c:\users\amelinte\desktop\lpt\tests\winstack\winstack.cpp:67</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5a218a] wmain+0x7a</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At c:\users\amelinte\desktop\lpt\tests\winstack\winstack.cpp:77</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5ae80d] __tmainCRTStartup+0x19d</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At f:\dd\vctools\crt_bld\self_64_amd64\crt\src\crtexe.c:533</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[13f5ae93e] wmainCRTStartup+0xe</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At f:\dd\vctools\crt_bld\self_64_amd64\crt\src\crtexe.c:377</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Users\amelinte\Desktop\lpt\tests\winstack\x64\Debug\winstack.exe</span><br style="font-family: monospace;"><span style="font-family: monospace;">[774a652d] +0x0</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At ??:0</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Windows\system32\kernel32.dll</span><br style="font-family: monospace;"><span style="font-family: monospace;">[7772c521] +0x0</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At ??:0</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In C:\Windows\SYSTEM32\ntdll.dll</span><br></div><br><h4>Resolving and printing an individual frame of a call stack</h4><div style="margin-left: 40px;"><span style="font-family: monospace;">lpt::stack::call_frame aframe(&nbsp;</span><span style="font-family: monospace;">here</span><span style="font-family: monospace;">[1] );</span><br style="font-family: monospace;"><span style="font-family: monospace;">std::cout &lt;&lt; "Frame 2:\n" </span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;&lt; lpt::stack::call_frame_info&lt; lpt::stack::extended_symbol_info</span><br style="font-family: monospace;"><span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
, lpt::stack::fancy_formatter &gt;(aframe);</span><br></div><br><h4>Resolving and printing some memory address</h4><br><div style="margin-left: 40px;"><span style="font-family: monospace;">lpt::stack::extended_symbol_info ei1(0x1111); <span style="color: rgb(51, 51, 255); font-weight: bold;">//Windows</span></span><br style="font-family: monospace;"><span style="font-family: monospace;">lpt::stack::extended_symbol_info ei1(reinterpret_cast&lt;lpt::stack::address_type&gt;(0x1111)); <span style="color: rgb(51, 51, 255); font-weight: bold;">//Linux</span><br>std:: cout &lt;&lt; ei1;</span><br></div><br><h3>Code</h3><ul><li><a href="lpt/lpt/include/lpt/call_stack.hpp">include/lpt/call_stack.hpp</a></li><li><a href="lpt/lpt/include/lpt/detail/win_call_stack.hpp">include/lpt/detail/win_call_stack.hpp</a></li><li><a href="lpt/lpt/include/lpt/detail/glibc_call_stack.hpp">include/lpt/detail/glibc_call_stack.hpp</a></li></ul></body></html>